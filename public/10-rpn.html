<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="utf-8">
		<title>Мой Роспотребнадзор</title>
		<meta name="description" content="о чем страница">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,  shrink-to-fit=no, viewport-fit=cover">
		<link type="image/ico" href="img/favicon.ico" rel="shortcut icon"><meta name="format-detection" content="telephone=no"> 
		<link href="libs/swiper/swiper-bundle.min.css" rel="stylesheet"/>
		<link href="libs/@fancyapps/ui/fancybox/fancybox.css" rel="stylesheet"/>
		<link href="css/main.min.css" rel="stylesheet"/>
		<script>
			function addBlock(elem) {
				fetch(`parts/${elem}.html`)
					.then(response => response.text())
					.then( text => {
						const wrap = document.querySelector(`#${elem}Wrap`);
						wrap.insertAdjacentHTML('afterend', text);
						wrap.previousElementSibling.remove()
						wrap.remove();
					});
			}
		</script>
	</head>
	<body class="main-page">
		<div class="main-wrapper">
			<script>addBlock(`header`)</script>
			<div id="headerWrap"></div>
			<main>
				<div class="page-head">
					<div class="container">
						<nav class="swiper breadcrumb-slider--js" aria-label="breadcrumb">
							<ol class="breadcrumb swiper-wrapper" itemscope="itemscope" itemtype="http://schema.org/BreadcrumbList">
								<li class="breadcrumb-item swiper-slide" itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem"><a href="/" itemprop="item"><span itemprop="name">Главная</span>
										<meta itemprop="position" content="1"/></a></li>
								<li class="breadcrumb-item active swiper-slide" itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem"><a href="#" itemprop="item"><span itemprop="name">Мой Роспотребнадзор</span>
										<meta itemprop="position" content="2"/></a></li>
							</ol>
						</nav>
						<h1>Мой Роспотребнадзор</h1>
					</div>
				</div>
				<!-- start headerBlock4-->
				<div class="headerBlock headerBlock--medicine section" id="headerBlock">
					<div class="container">
						<div class="headerBlock__row row">
							<div class="col-lg-7 col-xl-6">
								<p>Медицинская деятельность&nbsp;&mdash; профессиональная деятельность по&nbsp;оказанию медицинской помощи, проведению медицинских экспертиз, медицинских осмотров и&nbsp;медицинских освидетельствований, санитарно-противоэпидемических (профилактических) мероприятий и&nbsp;профессиональная деятельность, связанная с&nbsp;трансплантацией (пересадкой) органов&nbsp;и (или) тканей, обращением донорской крови&nbsp;и (или) ее&nbsp;компонентов в&nbsp;медицинских целях.</p>
								<p>Это важная отрасль, которая оказывает огромное влияние на&nbsp;качество и&nbsp;продолжительность жизни человека. Медицинская помощь необходима всем без исключения: от&nbsp;новорожденных до&nbsp;пожилых людей. </p>
								<p>Большинство организаций, осуществляющую свою деятельность в&nbsp;области здравоохранения отнесены к&nbsp;категориям чрезвычайно высокого и&nbsp;высокого риска. (Объекты чрезвычайно высокого и&nbsp;высокого риска).</p>
							</div>
							<div class="col-lg-5 col-xl-6">
								<div class="headerBlock__video-wrap">
									<video poster="img/medicine-poster.jpg">
										<source src="#"/>
										<p>Ваш браузер не поддерживает HTML5 видео. Используйте <span>a(href="#") ссылку на видео</span> для доступа.</p>
									</video>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- end headerBlock2-->
				<!-- start sRpn-->
				<section class="sRpnContent section" id="sRpn">
					<div class="container">
						<ul class="sRpnContent__list">
							<li class="sRpnContent__item sRpnContent__item--map">
								<div class="sRpnContent__title">Найди свое территориальное Управление Роспотребнадзора и&nbsp;центр гигиены и&nbsp;эпидемиологии
								</div>
								<div class="sRpnContent__descr">
									<p>Используйте нашу удобную карту с&nbsp;функцией поиска, чтобы найти ближайшее к&nbsp;вам территориальное управление Роспотребнадзора и&nbsp;центр гигиены и&nbsp;эпидемиологии. Здесь вы&nbsp;сможете получить актуальную информацию и&nbsp;поддержку, связанную с&nbsp;соблюдением санитарно-эпидемиологических норм и&nbsp;правил.</p>
								</div>
								<div class="sRpnContent__map-wrap">
									<div class="sRpnContent__search">
										<form>
											<button class="btn" type="button">
												<svg class="icon icon-search ">
													<use xlink:href="img/svg/sprite.svg#search"></use>
												</svg>
											</button>
											<input id="suggest1" type="text" placeholder="Название населенного пункта" inputmode="search"/>
											<button class="sRpnContent__delete-btn btn">
												<svg class="icon icon-close ">
													<use xlink:href="img/svg/sprite.svg#close"></use>
												</svg>
											</button>
										</form>
									</div>
									<ul class="sRpnContent__search-result" id="myDropdown">
									</ul>
									<div class="sRpnContent__map" id="map2">
									</div>
								</div>
							</li>
							<li class="sRpnContent__item">
								<div class="sRpnContent__title">О&nbsp;Роспотребнадзоре, его органах и&nbsp;организациях
								</div>
								<div class="sRpnContent__descr">
									<p>Роспотребнадзор, или Федеральная служба по&nbsp;надзору в&nbsp;сфере защиты прав потребителей и&nbsp;благосостояния человека, является ключевым государственным органом</p>
								</div>
								<a class="sRpnContent__more" href="#">Подробнее
									<svg class="icon icon-arrow-right ">
										<use xlink:href="img/svg/sprite.svg#arrow-right"></use>
									</svg>
								</a>
							</li>
							<li class="sRpnContent__item">
								<div class="sRpnContent__title">Контрольно-надзорная деятельность Роспотребнадзора
								</div>
								<div class="sRpnContent__descr">
									<p>Узнайте подробности о&nbsp;контрольно-надзорной деятельности Роспотребнадзора и&nbsp;о&nbsp;том, какие меры принимаются для обеспечения соблюдения санитарно-эпидемиологических стандартов на&nbsp;предприятиях и&nbsp;в&nbsp;организациях.</p>
								</div>
								<a class="sRpnContent__more" href="#">Подробнее
									<svg class="icon icon-arrow-right ">
										<use xlink:href="img/svg/sprite.svg#arrow-right"></use>
									</svg>
								</a>
							</li>
							<li class="sRpnContent__item">
								<div class="sRpnContent__title">Разрешительные документы Роспотребнадзора, необходимые для получения на&nbsp;этапе открытия предприятия
								</div>
								<div class="sRpnContent__descr">
									<p>Узнайте, какие разрешительные документы требуются на&nbsp;этапе открытия предприятия и&nbsp;как получить необходимые разрешения у&nbsp;Роспотребнадзора.</p>
								</div>
								<a class="sRpnContent__more" href="#">Подробнее
									<svg class="icon icon-arrow-right ">
										<use xlink:href="img/svg/sprite.svg#arrow-right"></use>
									</svg>
								</a>
							</li>
							<li class="sRpnContent__item">
								<div class="sRpnContent__title">Соблюдение санитарно-эпидемиологического законодательства в&nbsp;процессе осуществления предпринимательской деятельности
								</div>
								<div class="sRpnContent__descr">
									<p>Познакомьтесь с&nbsp;основами соблюдения санитарно-эпидемиологического законодательства в&nbsp;12&nbsp;ключевых отраслях предпринимательства.</p>
								</div>
								<a class="sRpnContent__more" href="#">Подробнее
									<svg class="icon icon-arrow-right ">
										<use xlink:href="img/svg/sprite.svg#arrow-right"></use>
									</svg>
								</a>
							</li>
							<li class="sRpnContent__item">
								<div class="sRpnContent__title">Обжалование решений контрольных (надзорных) органов
								</div>
								<div class="sRpnContent__descr">
									<p>Если у&nbsp;вас возникли вопросы или несогласие с&nbsp;решением контрольных органов, узнайте, как правильно обжаловать решение и&nbsp;защитить свои интересы.</p>
								</div>
								<a class="sRpnContent__more" href="#">Подробнее
									<svg class="icon icon-arrow-right ">
										<use xlink:href="img/svg/sprite.svg#arrow-right"></use>
									</svg>
								</a>
							</li>
							<li class="sRpnContent__item">
								<div class="sRpnContent__title">Государственные услуги, предоставляемые Роспотребнадзором
								</div>
								<div class="sRpnContent__descr">
									<p>Получите доступ к&nbsp;государственным услугам, предоставляемым Роспотребнадзором, через официальный портал Госуслуги:</p>
								</div>
								<div class="sRpnContent__btn btn btn-outline-danger">
									<svg class="icon icon-internet ">
										<use xlink:href="img/svg/sprite.svg#internet"></use>
									</svg>Перейти в Госуслуги
								</div>
							</li>
						</ul>
						<p>Мы&nbsp;стремимся обеспечить вас всей необходимой информацией и&nbsp;поддержкой, чтобы ваше предприятие было безопасным и&nbsp;соответствовало всем санитарно-эпидемиологическим требованиям.</p>
						<p>Пользуйтесь нашими ресурсами и&nbsp;участвуйте в&nbsp;обеспечении общественного здоровья и&nbsp;безопасности.</p>
					</div>
				</section>
			</main>
			<script>addBlock(`footer`)</script>
			<div id="footerWrap"></div>
		</div>
		<script src="libs/jquery/jquery.min.js"></script>
		<script src="libs/@fancyapps/ui/fancybox/fancybox.umd.js"> </script>
		<script src="libs/swiper/swiper-bundle.min.js"> </script>
		<script src="libs/inputmask/inputmask.min.js"> </script>
		<script src="libs/@popperjs/core/umd/popper.min.js"> </script>
		<script src="js/JSCCommon.js"></script>
		<script src="js/common.js"></script>
		<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=2066e304-cee0-4ed2-9cb2-5f6521d5f96c"> </script>
		<script>function init() {
	const markIcon = 'img/location.svg';
	const markIconColor = 'img/svg/map-color.png';
	var center = [55.75380038320217, 37.62071970898438];
	var myMap = new ymaps.Map('map2', {
		center: center,
		zoom: 10,
		controls: ['zoomControl']
	}),
		clusterer = new ymaps.Clusterer({
			preset: 'islands#invertedVioletClusterIcons',
			groupByCoordinates: false,
			clusterDisableClickZoom: true,
			clusterHideIconOnBalloonOpen: false,
			geoObjectHideIconOnBalloonOpen: false
		}),
		getPointData = function (i, t, p, time) {
			return {
				balloonContent: `<div class="h5">${t}</div><p>${p}</p><span> Режим работы:</span> <span>${time}</span>`
			};
		},
		getPointOptions = function () {
			return {
				hideIconOnBalloonOpen: false,
				iconLayout: 'default#image',
				iconImageHref: markIcon,
				// Размеры метки.

				iconImageSize: [34, 34],
				// Смещение левого верхнего угла иконки относительно
				// её "ножки" (точки привязки).
				iconImageOffset: [-17, -7]
			};
		},
		points = [
			{ mark: [55.67455635081638, 37.64072341673275], t: '1111111Магазин Golden Decor в ТК Каширский Двор', p: 'Алтайский край 656 056, г. Барнаул, ул. М. Горького, 28', time: '10:00 — 22:00' },
			{ mark: [55.684072399488265, 37.55676825847164], t: 'Магазин Golden Decor в ТК Каширский Двор', p: 'Амурская область 675 002, г. Благовещенск, ул. Первомайская, д. 30', time: '10:00 — 22:00' },
			{ mark: [55.78843546026375, 37.656384548873845], t: 'Магазин Golden Decor в ТК Каширский Двор', p: ' Архангельская область 163 000, г. Архангельск, ул. Гайдара, д. 24', time: '10:00 — 22:00' },
			{ mark: [55.744522, 37.616378], t: 'Магазин Golden Decor в ТК Каширский Двор', p: 'Астраханская область 414 057, г. Астрахань, ул. Н. Островского, 138', time: '10:00 — 22:00' },
			{ mark: [55.716733, 37.589988], t: 'Магазин Golden Decor в ТК Каширский Двор', p: 'Белгородская область 308 023, г. Белгород, ул. Железнякова, д. 2', time: '10:00 — 22:00' },
			{ mark: [55.716733, 37.59988], t: 'Магазин Golden Decor в ТК Каширский Двор', p: 'Брянская область 241 050, г. Брянск, 2-й Советский пер., д. 5А', time: '10:00 — 22:00' },
			{ mark: [54.716733, 37.58988], t: 'Магазин Golden Decor в ТК Каширский Двор', p: 'Владимирская область 600 001, г. Владимир, ул. Офицерская, д. 20', time: '10:00 — 22:00' },
			{ mark: [53.716733, 37.58988], t: 'Магазин Golden Decor в ТК Каширский Двор', p: 'Волгоградская область 400 005, г. Волгоград, пр. им. В. И. Ленина, д. 50 Б', time: '10:00 — 22:00' },
			{ mark: [55.716733, 36.58998], t: 'Магазин Golden Decor в ТК Каширский Двор', p: 'Вологодская область 160 012, г. Вологда, ул. Яшина, 1а', time: '10:00 — 22:00' },
			{ mark: [55.716733, 34.58998], t: 'Магазин Golden Decor в ТК Каширский Двор', p: 'Воронежская область 394 038, г. Воронеж, ул. Космонавтов, д. 21А', time: '10:00 — 22:00' },
		],
		geoObjects = [];


	let searchList = document.querySelector(".sRpnContent__search-result");

	for (var i = 0, len = points.length; i < len; i++) {
		let mark = points[i].mark;
		let markdata = getPointData(points[i].i, points[i].t, points[i].p, points[i].time);
		geoObjects[i] = new ymaps.Placemark(mark, markdata, getPointOptions());
		geoObjects[i].events
			.add('balloonopen', e => {
				var target = e.get('target');
				target.options.set('iconImageHref', markIcon);
				target.options.set({ iconImageSize: [68, 74] });
				target.options.set({ iconImageOffset: [-34, -74] });
				$(".sOurStores__map-caption").html(`<div class="content">${target.properties.get('balloonContent')}</div><div class="closeButton"></div></div>`);
			})
			.add('balloonclose', (e) => {
				var target = e.get('target');
				target.options.set('iconImageHref', markIcon);
				target.options.set({ iconImageSize: [30, 32] });
				target.options.set({ iconImageOffset: [-15, -32] });
				$(".sOurStores__map-caption").html("");
			});

		


	}
	function showBaloon(el) {
		var coords = geoObjects[el.getAttribute('data-coords')].geometry._coordinates;
		console.log(coords);
		myMap.setCenter(coords, 14);
		ymaps.geoQuery(geoObjects).getCentralObject(myMap).balloon.open();
	}
	searchList.addEventListener("click", function (e) {
		const target = e.target.closest(".sRpnContent__search-link")
		if (!target) return;
		e.preventDefault();
		showBaloon(target)
		// ymaps.geoQuery(geoObjects).getClosestTo().balloon.open();  
	})
	clusterer.options.set({
		gridSize: 80,
		clusterDisableClickZoom: true,
		iconColor: '#000000',
	});
	clusterer.add(geoObjects);
	myMap.geoObjects.add(clusterer);
	myMap.setBounds(clusterer.getBounds(), {
		checkZoomRange: true
	});
	$(document).on('click', '.closeButton', function () {
		myMap.balloon.close()
		// $(document).
	});


	let input = document.querySelector("#suggest1");
	input.addEventListener('input', function () {
		var filter, ul, li, a, i;
		filter = this.value.toUpperCase(); 
		searchList.innerHTML = '';
		for (i = 0; i < points.length; i++) { 
			if (points[i].p.toUpperCase().indexOf(filter) > -1) {
				let text = `
					<li class="sRpnContent__search-item">
						<a href="#" class="sRpnContent__search-link" data-coords="${i}">
							${points[i].p}
						</a>
					</li>
			`
			searchList.insertAdjacentHTML('beforeend', text);
				// li[i].style.display = "";
			} else {
				// li[i].style.display = "none";
			}
		}
	})


	let button = document.querySelector(".sRpnContent__search button");
	button.addEventListener('click', function () {
		var filter, ul, li, a, i;
		filter = input.value.toUpperCase();
		let searchList = document.getElementById("myDropdown");
		li = searchList.querySelectorAll("li");

		for (i = 0; i < li.length; i++) {
			let txtValue = li[i].querySelector("a").innerText;
			if (txtValue.toUpperCase().indexOf(filter) > -1) {
				showBaloon(li[i].querySelector("a"))
			}
		}
	})

};
// let mapShow = true;
// $('.tabs__btn:nth-child(2)').bind('click', function () {
//   //- myMap.container.fitToViewport();
//   //- console.log(mapShow)
//   if (mapShow == true) {
//   }
//   mapShow = false;
// });
ymaps.ready(init);
// });

		</script>
	</body>
</html>